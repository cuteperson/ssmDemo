<!DOCTYPE html>
<!-- saved from url=(0078)http://scu.co.cnki.net/Student/SubmitLiteratureReview.html?r=0.795223277492539 -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <title>提交文献综述--学生角色 </title>
    <link rel="stylesheet" href="./default(2).css">
    <link rel="stylesheet" href="./easyui(6).css">
    <link rel="stylesheet" href="./rangyStyle(2).css">
    <link rel="stylesheet" href="./base(6).css">
    <link rel="stylesheet" href="./common(2).css">
    <link rel="stylesheet" href="./webuploader(3).css">

    <script type="text/javascript" src="./jquery.min.js(6).download"></script>
    <script type="text/javascript" src="./jquery.cookie.js(6).download"></script>
    <script type="text/javascript" src="./jquery.extend.js(6).download"></script>
    <script type="text/javascript" src="./jquery.easyui.min.js(6).download"></script>
    <script type="text/javascript" src="./common.js(6).download"></script>
    <script type="text/javascript" src="./constant.js(6).download"></script>
    <script type="text/javascript" src="./DesignTable.js(2).download"></script>
    <script type="text/javascript" src="./audit.js(4).download"></script>
    <script type="text/javascript" src="./swfupload.js(3).download"></script>
    <script type="text/javascript" src="./swfupload.queue.js(3).download"></script>
    <script type="text/javascript" src="./kindeditor.js(2).download"></script>
    <script type="text/javascript" src="./zh_CN.js(2).download"></script>
    <script type="text/javascript" src="./rangy-core.js(2).download"></script>
    <script type="text/javascript" src="./rangy-classapplier.js(2).download"></script>
    <script type="text/javascript" src="./rangy-serializer.js(2).download"></script>
    <script type="text/javascript" src="./rangy-highlighter.js(2).download"></script>
    <script type="text/javascript" src="./rangyHelper.js(2).download"></script>
    <script type="text/javascript" src="./JSEncrypt.js(6).download"></script>
    <!--[if lt IE 9]>
        <script type="text/javascript" src="../Scripts/json2.js?r=2019050813144401"></script>
    <![endif]-->
    <script type="text/javascript" src="./webuploader.nolog.js(3).download"></script>
    <script type="text/javascript" src="./webuploader.handler.js(3).download"></script>

</head>
<body>
    
    <!-- 时间限制提示 -->
    
    <!-- 课题基本信息 -->
    <div class="main" id="choiceDiv" style="">
        <div class="gxf_problem gxf_pro_top" id="historyDiv" style="">
            <div class="active"><h2><span class="sanjiao_active"></span>文献综述</h2></div>
            <div class="gxf_pro_content ">
                <span>最新提交时间：<span id="zxtjsj">2019-05-01 23:14:31</span></span>
                <span><a href="http://scu.co.cnki.net/Student/SubmitLiteratureReview.html?r=0.795223277492539#CheckDetail" class="listA">查看审核详情</a></span>
                <span><a id="distorylink" class="listA" style="" href="javascript:openframe(&#39;文献综述历史纪录&#39;, &#39;../Student/StuHistoryFile.html?projectId=null&amp;sid=null&amp;opeType=10&#39;,false)">查看历史记录</a></span>
            </div>
        </div>
        <!-- 课题基本信息 -->
        <div id="gxf-project-information"><div class="gxf_problem gxf_problem_detail"><div><h2><span></span>课题基本信息</h2></div><div class="gxf_pro_content gxf_content_table"><ul class="clearfix gxf_project_detadil_ul"><li style="width:100%;"><span class="detadil_txt_left"> 课题题目：</span><span style="width:600px;" class="detadil_txt_right">条件生成对抗网络在少数类有效数据生成中的研究与应用</span></li><li><span class="detadil_txt_left"> 可选专业：</span><span class="detadil_txt_right">软件工程</span></li><li><span class="detadil_txt_left"> 课题申报时间：</span><span class="detadil_txt_right">2018-12-11</span></li><li><span class="detadil_txt_left"> 题目类型：</span><span class="detadil_txt_right">理论研究</span></li><li><span class="detadil_txt_left"> 题目来源：</span><span class="detadil_txt_right">教师科研纵向课题</span></li><li><span class="detadil_txt_left"> 选择模式：</span><span class="detadil_txt_right">学生提交课题</span></li><li><span class="detadil_txt_left"> 课题所属专业：</span><span class="detadil_txt_right">软件学院-软件工程</span></li><li><span class="detadil_txt_left"> 指导教师：</span><span class="detadil_txt_right">段磊（20092049）</span></li><li><span class="detadil_txt_left"> 教师职称：</span><span class="detadil_txt_right">教授</span></li><li><span class="detadil_txt_left"> 导师联系邮箱：</span><span class="detadil_txt_right"></span></li><li><span class="detadil_txt_left"> 学生姓名：</span><span class="detadil_txt_right">王启帆（2015141463170）</span></li><li><span class="detadil_txt_left"> 学生院系专业：</span><span class="detadil_txt_right">软件学院-软件工程</span></li></ul></div></div></div>

        <!-- 详情 -->
        <div id="openReportDetail" style="">
            <div class=" gxf_problem gxf_problem_title">
                <div><h2><span></span>内容详情</h2></div>
                <div class="gxf_designTable_content">
                    <!-- 无自定义时详情 -->
                    <!--<ul class="gxf_designTable_box" id="noDesignTable" style="display:none;">
                        <li>
                            <p>文献综述需要填写的内容<span class="statement margl">请按照学校的要求，在下方输入相关内容，若无内容请填写“无”</span></p>
                            <div class="gxf_designTable_rangy clearfix">
                                <div id="left_neirong1" class="gxf_rangy_left"></div>
                                <ul id="right_left_neirong1" class="gxf_rangy_right"></ul>
                            </div>
                        </li>
                    </ul>-->
                    <ul class="gxf_designTable_box" id="DesignTable"><li><p>文献综述需要填写的内容<span class="writerText margl"> 共输入<i style="color: #f00;">3547</i>字符</span><span class="statement margl">请按照学校的要求，在下方输入相关内容，若无内容请填写“无”</span></p><div class="gxf_designTable_rangy clearfix"><div id="left_neirong1" class="gxf_rangy_left"><p><span>文献综述</span></p><p><span>类别不平衡问题</span></p><p><span>数据集中的类别不平衡问题是指在一个分类问题中，数据中某些类别的样本数量远远少于其他类别的数量，拥有大量样本的数量的类被称为多数类，而拥有少数样本的类就被称为少数类[1]。在现实生活中，经常会出现类别不平衡的问题，例如在疾病监测模型中，有一些非常重要的疾病样本数量很稀少，会远小于一些常见的疾病样本数，同时疾病患者的样本数也会远小于正常人的样本数，这种类别不平衡的问题会出现在生活的方方面面。如果使用分类器对这些数据进行分类，可能会导致分类效果没那么理想，有所偏差，因此解决类别不平衡问题一直是机器学习中的一个重点问题所在。</span></p><p><span>目前来讲，解决类别不平衡问题的方法主要是集中在数据采集技术以及数据处理算法上面。可以通过使用相应的采样方法来改变数据集的原始分布，例如对多数类的样本进行欠采样，或对少数类样本进行过采样，也可以两种方式相结合，从而使得数据集的各种类别之间的样本数量达到一个稳定的状态。在样本的采样技术方面，分为随机采样[2]和合成少数类过采样技术两种技术（Synthetic&nbsp;Minority&nbsp;Oversampling&nbsp;Technique,&nbsp;SMOTE）[3]。随机采样是采样算法中最简单也是最常用的算法，分为随机欠采样（Random&nbsp;Under&nbsp;Sampling,&nbsp;RUS）和随机过采样（Random&nbsp;Over&nbsp;Sampling,&nbsp;ROS）[4]。随机欠采样技术是指，从多数类别的样本中随机选择一部分样本，与原始数据集中的少数类别样本组合成新的集合，随机过采样的算法就恰好相反，是通过对少数类别的样本进行多次有放回的随机抽取，然后再与原始数据集中的多数类别样本组合成新的集合。但是由于随机过采样算法在采样过程中是简单的复制样本，这样会导致过拟合现象的发生。研究人员就在随机过采样算法的基础上进行了改进，通过利用样本的特征及其分布，对少数类样本数据进行人工的过采样，再将新的样本添加进原有的数据集中。</span></p><p><span>在数据处理算法方面，可以通过代价敏感学习算法（Cost-Sensitive&nbsp;Learning）[5]来解决类别不平衡的问题。这种技术主要是考虑当分类错误的类别导致惩罚力度的差异时，分类器的训练原则应该进行改变，不是再继续追求整体的训练误差最小，而是为不同类型的错误分配不同的代价，对少数类样本产生的分类错误分配较大的代价，从而使整体的训练代价最小化。代价敏感向量机（Cost&nbsp;Sensitive-Support&nbsp;Vector&nbsp;Machine,&nbsp;CS-SVM）[6]的实现就是在SVM算法上面施加代价敏感学习的方法。常用的代价敏感学习算法有三类：</span></p><p><span>（1）&nbsp;第一类方法是通过对不同的分类算法进行代价敏感的引入，针对不同的分类器模型来直接构造代价敏感学习模型，例如在决策树中引入代价敏感算法，来使得剪枝规则的损失最小化。</span></p><p><span>（2）&nbsp;第二类方法则不依赖于某个具体的分类器，是按照贝叶斯风险理论来对分类结果进行调整，将损失减小到最小。</span></p><p><span>（3）&nbsp;第三类方法是在分类之前就改变原始数据的权重来对最小化分类结果的损失。</span></p><p><span>同时，还可以选择集成技术[7]的方法来处理不平衡数据集的分类问题。具体原理是将许多个分类器组合成为一个分类器，从而提高分类器的性能。最为人熟知的集成学习方法要数Boosting，它是将许多个性能较弱的分类器组合起来，来达到较强的分类效果。</span></p><p><span>生成对抗网络</span></p><p><span>生成对抗网络（Generative&nbsp;Adversarial&nbsp;Network,&nbsp;GAN）是由Goodfellow等人在2014年的时候提出的一种基于博弈思想来进行训练的非监督学习方法[8]。其原理是使用生成模型和判别模型这两个神经网络来进行对抗式训练，生成模型的作用是从某种噪声分布中进行随机采样来作为模型的输入，经过计算，模型会输入与真实的样本很接近的人工样本。而判别模型则是通过输入真实的样本或者是人工制造的样本，然后进行博弈训练，将真实样本与人工样本尽可能的区分开来。生成模型的作用就是造假，造出能够欺骗判别模型的假样本，判别模型则要很专注的观察真实样本和假样本的不同，将假样本最大限度的区分出来。两个模型在训练过程中不断的对抗，不断的进行博弈，将参数不断的进行优化，提高自身的造假或者鉴定的能力，在这个过程中，两个神经网络的能力达到旗鼓相当的地步，于是生成器便可以产生出可以以假乱真的人工样本，这就是生成对抗网络的基本原理。</span></p><p><span>但是后来研究人员发现，最初的GAN模型在训练过程中不太稳定，模型容易在收敛问题上出现问题，同时需要很多技巧才能保证模型的有效性。于是研究人员在生成模型中引入了一个条件，用来控制输入进生成模型的数据信息，也就是条件生成对抗网络（CGAN）。在后面的2016年，Alec&nbsp;Radford等人考虑到如果在GAN中借鉴卷积神经网络的思想也许会增加GAN的稳定性，于是对原有得GAN的网络模型在架构以及训练过程进行了改进，提出来了GAN架构的升级版，也就是将无监督学习和有监督学习二者结合起来的深度卷积生成对抗网络（DCGAN）模型[9]。之后InfoGAN[10]提出的出发点则是想要将原始的z分成两个部分，一部分是一组隐变量，它的隐含意义是用来解释的，而另一部分则是不可以再进行压缩的噪声。WGAN[11]模型则是通过解决GAN不稳定的因素来提供了一种更加稳定的GAN框架。目前来看，GAN模型主要应用的领域是在文本，图片等数据的生成方面，尽管模型提出的时间不长，但已经有很多知名企业投入了大量精力到GAN的研究和应用中。</span></p><p><span>参考文献</span></p><p><span>[1]&nbsp;叶志飞,&nbsp;文益民,&nbsp;吕宝粮.&nbsp;不平衡分类问题研究综述[D].&nbsp;2009.</span></p><p><span>[2]&nbsp;Ling&nbsp;C&nbsp;X,&nbsp;Li&nbsp;C.&nbsp;Data&nbsp;mining&nbsp;for&nbsp;direct&nbsp;marketing:&nbsp;Problems&nbsp;and&nbsp;solutions[C].&nbsp;KDD.1998,&nbsp;98:&nbsp;73-79.</span></p><p><span>[3]&nbsp;Tahir&nbsp;MA,&nbsp;Kittler&nbsp;J,&nbsp;Yan&nbsp;F.&nbsp;Inverse&nbsp;random&nbsp;under&nbsp;sampling&nbsp;for&nbsp;class&nbsp;imbalance&nbsp;problem&nbsp;and&nbsp;its&nbsp;application</span></p><p><span>to&nbsp;multi-label&nbsp;classification[J].&nbsp;Pattern&nbsp;Recognition,&nbsp;2012,&nbsp;45(10):&nbsp;3738-3750.</span></p><p><span>[4]&nbsp;Garcıa&nbsp;S,&nbsp;Derrac&nbsp;J,&nbsp;Triguero&nbsp;I,&nbsp;et&nbsp;al.&nbsp;Evolutionary-based&nbsp;selection&nbsp;of&nbsp;generalized&nbsp;instances&nbsp;for&nbsp;imbalanced</span></p><p><span>classification[J].&nbsp;Knowledge-Based&nbsp;Systems,&nbsp;2012,&nbsp;25(1):&nbsp;3-12.</span></p><p><span>[5]&nbsp;López&nbsp;V,&nbsp;Río&nbsp;S&nbsp;D,&nbsp;Benítez&nbsp;J&nbsp;M,&nbsp;et&nbsp;al.&nbsp;Cost-sensitive&nbsp;linguistic&nbsp;fuzzy&nbsp;rule&nbsp;based&nbsp;classification&nbsp;systems&nbsp;under</span></p><p><span>the&nbsp;MapReduce&nbsp;framework&nbsp;for&nbsp;imbalanced&nbsp;big&nbsp;data[J].&nbsp;Fuzzy&nbsp;Sets&nbsp;&amp;&nbsp;Systems,&nbsp;2015,&nbsp;258:&nbsp;5-38.</span></p><p><span>[6]&nbsp;Veropoulos&nbsp;K,&nbsp;Campbell&nbsp;C,&nbsp;Cristianini&nbsp;N.&nbsp;Controlling&nbsp;the&nbsp;sensitivity&nbsp;of&nbsp;support&nbsp;vector&nbsp;machines[C].</span></p><p><span>Proceedings&nbsp;of&nbsp;the&nbsp;international&nbsp;joint&nbsp;conference&nbsp;on&nbsp;AI.&nbsp;1999,&nbsp;55:&nbsp;60.</span></p><p><span>[7]&nbsp;Sun&nbsp;Y,&nbsp;Kamel&nbsp;M&nbsp;S,&nbsp;Wong&nbsp;A&nbsp;K&nbsp;C,&nbsp;et&nbsp;al.&nbsp;Cost-sensitive&nbsp;boosting&nbsp;for&nbsp;classification&nbsp;of&nbsp;imbalanced&nbsp;data[J].</span></p><p><span>Pattern&nbsp;Recognition,&nbsp;2007,&nbsp;40(12):&nbsp;3358-3378.</span></p><p><span>[8]&nbsp;Ian&nbsp;J.G,&nbsp;Jean&nbsp;P,&nbsp;Shah,&nbsp;Mehdi&nbsp;M,&nbsp;Bing&nbsp;X,&nbsp;Yoshua&nbsp;B.&nbsp;Generative&nbsp;adversarial&nbsp;nets.&nbsp;[C].&nbsp;NIPS.&nbsp;2014:&nbsp;2672-</span></p><p><span>2680.</span></p><p><span>[9]&nbsp;Radford&nbsp;A,&nbsp;Metz&nbsp;L,&nbsp;Chintala&nbsp;S.&nbsp;Unsupervised&nbsp;Representation&nbsp;Learning&nbsp;with&nbsp;Deep&nbsp;Convolutional</span></p><p><span>Generative&nbsp;Adversarial&nbsp;Networks[J].&nbsp;Computer&nbsp;Science,&nbsp;2015.</span></p><p><span>[10]&nbsp;Chen&nbsp;X,&nbsp;Duan&nbsp;Y,&nbsp;Houthooft&nbsp;R,&nbsp;et&nbsp;al.&nbsp;InfoGAN:&nbsp;Interpretable&nbsp;Representation&nbsp;Learning&nbsp;by&nbsp;Information</span></p><p><span>Maximizing&nbsp;Generative&nbsp;Adversarial&nbsp;Nets[J].&nbsp;2016.</span></p><p><span>[11]&nbsp;Arjovsky&nbsp;M,&nbsp;Chintala&nbsp;S,&nbsp;Bottou&nbsp;L.&nbsp;Wasserstein&nbsp;GAN[J].&nbsp;2017.</span></p></div><div id="right_box_left_neirong1" class="gxf_rangy_right_box" style="height: 1456px;"><p class="gxf_rangy_right_top">支持左侧选择文字批注，也支持★<a class="listA rangy_all" href="javascript:;">整体批注</a></p><ul id="right_left_neirong1" class="gxf_rangy_right" style="height: 1425px;"><li class="gxf_rangy_noContent"><h3>暂无批注内容</h3></li></ul></div></div></li></ul><!-- 自定义时详情 -->
                    <ul class="gxf_designTable_box">
                        <li id="fujian" style="">
                            <p>附件<span id="fujian-test" class="margl" style="font-size: 12px;"> </span></p>
                            <div id="accessory" class="gxf_designTable_detailes">附件：<span id="accessorySpan">毕业论文文献综述.docx</span><a class="listA margl" href="http://reportdownload.cnki.net/cofiledownload/DownLoadFile.aspx?downType=7&amp;user=2015141463170&amp;userServerID=0&amp;fileID=44280&amp;universityNum=2647&amp;isHistory=0&amp;check=e3c56384962d62ad9baa6be17960451a" download="毕业论文文献综述.docx">点击下载</a></div>
                        </li>
                        <li><input id="update" class="formBtn margt" type="button" value="修改" style="display:none;"></li>
                    </ul>
                </div>
                <div class="gxf_problem gxf_problem_reader" id="CheckDetail">
                    <div><h2><span></span>审核情况</h2></div>
                    <div id="designTableCheckBox"><div class="gxf_designTable_check">指导教师审核情况</div><div class="gxf_designTable_content"><ul class="gxf_designTable_box"><li class="gxf_designTable_roleTime"><span>审核人：段磊</span><span class="margl">审核时间：2019-06-03 10:38:59</span></li><li class="_checkState_"><p>审核状态</p><input type="hidden" class="hdOpeKeyId" value="103274" projectid="6134" roletype="3" checkstate="1"><input type="hidden" class="showAttachment" value="true" filename="" filelink=""><input type="hidden" class="designTableModel" value="检查通过。" aesdesigntableinfo="L0KAQnNmvyFryG0yMC3tkzJVHX62A8l6tCllvnsX+7JmJ33kkUnUDhlAfyylGB18Q8VHWMDRgpc0I7XPAQlg8bWmPiruMSZoPvMUjW05IlmxnyKGGqbOVF1SJ1hq175PLusQMowrRiGuEUfEXduwqlmaXiJIkCFlimKCIyHaVaaJCcqSrQrIyenFGX0io7K40ia+6Hw8wab8tycO2p1cnw=="><div class="gxf_designTable_detailes"><span class="txt_green">审核通过</span></div></li><li><p>审核意见</p><div class="gxf_designTable_detailes">检查通过。</div></li></ul></div></div>
                </div>
            </div>
        </div>
        <!-- 提交 -->
        <div id="addOpenReport" style="display:none;">
            <div class=" gxf_problem gxf_problem_title">
                <div><h2><span></span>添加内容</h2></div>
                <div class="gxf_designTable_content">
                    <ul class="gxf_designTable_box" id="noDesignTableShow" style="display: none;">
                        <li>
                            <p>文献综述需要填写的内容<span class="writerText margl"> 共输入<i style="color: #f00;"> 0 </i>字符</span><span class="statement">请按照学校的要求，在下方输入相关内容，若无内容请填写“无”</span></p>
                            <input id="neirong2" type="text" class="easyui-textbox textbox-f" data-options="multiline:true,height:200" style="width: 100%; display: none;"><span class="textbox easyui-fluid" style="width: 0px; height: 198px;"><textarea id="_easyui_textbox_input1" class="textbox-text validatebox-text textbox-prompt" autocomplete="off" tabindex="" placeholder="" style="margin: 0px; height: 190px; width: 0px;"></textarea><input type="hidden" class="textbox-value" value=""></span>
                        </li>
                    </ul>
                    <ul class="gxf_designTable_box" id="designTableShow" style="display: none;"></ul>
                    <ul class="gxf_designTable_box">
                        <li id="submit_fujian" style="display:none;">
                            <p>添加附件：<span class="statement" id="scfj">添加与内容有关附件，上传的文件将以附件的形式显示。支持附件格式为doc，docx，pdf，wps，rar，zip</span></p>
                            <input id="txtFileName" class="easyui-textbox textbox-f" data-options="readonly:true" style="width: 258px; display: none;"><span class="textbox textbox-readonly" style="width: 256px;"><input id="_easyui_textbox_input2" type="text" class="textbox-text validatebox-text validatebox-readonly textbox-prompt" autocomplete="off" tabindex="" readonly="readonly" placeholder="" style="margin: 0px; padding-top: 0px; padding-bottom: 0px; height: 25px; line-height: 25px; width: 248px;"><input type="hidden" class="textbox-value" value=""></span>
                            <span id="webUploaderPick" class="webuploader-container"><div class="webuploader-pick">浏览</div><div id="rt_rt_1dfs5mgua8nb1rkj1ruq26h10qc2" style="position: absolute; top: 0px; left: 0px; width: 20px; height: 4px; overflow: hidden; bottom: auto; right: auto;"><input type="file" capture="camera" name="file" class="webuploader-element-invisible" accept=".doc,.docx,.pdf,.wps,.rar,.zip"><label style="opacity: 0; width: 100%; height: 100%; display: block; cursor: pointer; background: rgb(255, 255, 255);"></label></div></span>
                            <div id="divFileProgressContainer" style=""></div>
                        </li>
                        <li id="submitBtn" style="display: none;">
                            <input id="submit" class="formBtn margt" type="button" value="提交">
                            <input id="cancel" class="clearBtn margl margt" type="button" value="取消">
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    

    <script type="text/javascript">
        // 获取角色
        var role = get_current_role();
        var ktbh = getUrlParam("id");
        var sid = getUrlParam("sid");
        var isHistory = getUrlParam("isHistory");
        var submitid = getUrlParam("submitid");
        var zybh = "";
        var xybh = "";
        var AttachmentNum = 0; // 是否删除附件
        var DesignTableData;  // 自定义
        var detailsData; // 详细信息
        var webUploader; //上传实例

        var noDesignTableArr = [
            { 'ID': 0, '列名': "neirong1", "中文列名": "内容","标题类型": 0, "类型": 0, "题目": "文献综述需要填写的内容", "rangyType": 12, "注释": "请按照学校的要求，在下方输入相关内容，若无内容请填写“无”", "是否显示附件": 1 }
        ];


        $(function () {
            getTimeTips();// 时间限制提示
            var obj = getProjectInformation(ktbh, "task");// 获取课题基本信息
            xybh = obj["xybh"];
            zybh = obj["zybh"];
            if (obj["isTrue"]) { //有课题是显示 无课题时提示
                $("#nochoiceDiv").remove();
                $("#choiceDiv").show();
                DesignTableData = isSetDesignTable(38, xybh, zybh);
                DesignTableData.done(function (data) {
                    if (data.isSuccess) {
                        detailsData = getDetail(data.rows); // 获取详情
                    } else {
                        detailsData = getDetail(); // 获取详情
                    };
                }).fail(function (err) {
                    console.log(err);
                });
            } else { //有课题是显示 无课题时提示
                $("#choiceDiv").remove();
                $("#nochoiceDiv").show();
            };
            
            //创建上传实例
            webUploader = createWebuploader({
                server: "../Handler/Literature.ashx",
                successCallback: function (data) {
                    Refresh();
                }
            });
        });

        // 时间限制提示
        function getTimeTips() {
            $.ajax({
                url: "../Handler/OpenReport.ashx",
                data: {
                    "action": "IsSetStuTimeLimit",
                    "type": 5
                },
                dataType: "json",
                type: "POST",
                success: function (data) {
                    if (data.isSuccess) {
                        $("#timeLimit").show();
                        $("#timeText").html("您所在学校或者院系设置的提交时间为【 <span style='color:#f00;'>" + data.rows[0]["开始时间"] + "</span> 至 <span style='color:#f00;'> " + data.rows[0]["结束时间"] + "</span> 】，请在该时间范围内进行操作。");
                    } else {
                        $("#timeLimit").remove();
                    };
                },
                error: function (err) {
                    console.log(err);
                }
            });
        };
        
        // 方法：获取详情；
        function getDetail(designTable) {
            var xhr = $.ajax({
                url: "../Handler/OpenReport.ashx",
                data: {
                    "action": "GetDetail",
                    "opeType": 10,
                    "zybh": zybh,
                    "xybh": xybh,
                    "sid": sid,
                    "projectId": ktbh,
                    "id": submitid,
                    "isHistory": isHistory
                },
                dataType: "json",
                type: "POST",
                success: function (data) {
                    if (data.isSuccess) {
                        var data = data.rows[0];
                        getCheckDetail();//获取审核状态
                        $("#zxtjsj").html(data["创建时间"]);//创建时间
                        submitid = (submitid || data["文件ID"]);// 文献综述ID
                        openstuhistoryfile(10, ktbh, sid); //历史纪录
                        // 获取附件  获取历史记录
                        if (isHistory == "1") {
                            getAttachmenthisory(10, ktbh, sid, submitid, isHistory);
                        } else {
                            $("#historyDiv").show();
                            getAttachmenthisory(10, ktbh, sid, submitid);
                        };
                        $("#openReportDetail").show();
                        if (designTable) { // 有自定义
                            //$("#openReportDetail,#DesignTable").show();// 显示详情
                            //$("#noDesignTable").remove();
                            GetDetailesDesignTableForRangy(designTable, data, 'DesignTable', 12);
                        } else {
                            GetDetailesNoDesignTableForRangy(noDesignTableArr, data, "DesignTable");

                            //$("#left_neirong1").html("<p><span>" + (data['内容'] == "DesignTable" ? "" : data["内容"].replace(/(\n\n\n)|(\n\n)|\n/g, '</span></p><p><span>').replace(/\s/g, '&nbsp;')) + "</span></p>");
                            //$("#openReportDetail,#noDesignTable").show();// 显示详情
                            //$("#DesignTable").remove();
                            //RangyHelper.createNew('left_neirong1', '', submitid, 12, '');
                        };
                        
                        // 是否显示修改按钮
                        if (role == 2) {
                            if (data["审核"] == -1 || data["审核时间"] == null || data["审核时间"] == "") {
                                $("#update").show();
                            };
                            if (data["审核"] == 1 && data["允许修改"] == 1) {
                                $("#update").show();
                            };
                        } else {
                            $("#update").remove();
                        };
                        if (isHistory == "1") {
                            $("#update").remove();
                        };
                    } else {
                        $("#historyDiv,#openReportDetail").remove();
                        if (designTable) {
                            $("#noDesignTableShow").remove();
                            $("#addOpenReport,#designTableShow,#submitBtn").show();
                            SetDesignTable(designTable, 'designTableShow')
                            if (designTable[0]['是否显示附件'] == 1) {
                                $("#submit_fujian").show();
                            };
                        } else {
                            $("#addOpenReport,#noDesignTableShow,#submit_fujian,#submitBtn").show();
                            $.parser.parse('#noDesignTableShow');       // 重新渲染页面
                            showWriteTextNumber.createNew("choiceDiv", "neirong2");
                        }
                        webUploader.refresh();
                    };
                },
                eorror: function (err) {
                    console.log(err);
                }
            });
            return xhr;
        };
        
        // 修改按钮点击
        $("#update").off('click').on("click", function () {
            $("#openReportDetail").remove();
            DesignTableData.done(function (data) {
                detailsData.done(function (details) {
                    if (details.isSuccess) {
                        if (data.isSuccess) {
                            $("#addOpenReport,#designTableShow,#submitBtn").show();
                            SetValueDesignTable(data.rows, details.rows[0], 'designTableShow');
                            if (data.rows[0]['是否显示附件'] == 1) {
                                getAccessory(ktbh, sid, 10);
                                $("#submit_fujian").show();
                            };
                        } else {
                            getAccessory(ktbh, sid, 10);
                            $("#neirong2").textbox("setText", retrieveUnequa(details.rows[0]["内容"]));
                            $("#neirong2").prev().find(".writerText>i").html(" " + $("#neirong2").textbox("getText").replace(/\s|\r|\n/g, "").length + " ");
                            $("#addOpenReport,#noDesignTableShow,#submit_fujian,#submitBtn").show();
                            $.parser.parse('#noDesignTableShow');       // 重新渲染页面
                        }
                        webUploader.refresh();
                    } else {
                        myMessage(details.message);
                    };
                });
            });
        });
        
        // 文献综述审核状态
        function getCheckDetail() {
            var options = {
                tableElement: $("#designTableCheckBox"),
                queryUrl: "../Handler/OpenReport.ashx?action=GetOperationDetail",
                queryParams: {
                    "opeType": 10,
                    "sid": sid,
                    "projectId": ktbh,
                    "id": submitid,
                    "isHistory": isHistory
                },
                entrust: ((role == 10) ? "3" : getUrlParam("entrust")),
                submitUrl: "../Handler/OpenReport.ashx?action=CheckStudentReport",
                submitData: {
                    "sid": sid,
                    "opeType": 10,
                    "keyId": submitid
                }
            };
            co_audit.bind(options, function (data) {
                if (data && data.RoleType == 3) { //指导教师审核后
                    $("#update").remove();
                };
                if (isHistory == "1") {
                    $("#update").remove();
                };
            });
        };

        // 提文献综述
        $("#submit").click(function () {
            var list = {
                'zybh': zybh,
                'xybh': xybh,
                'scfj': AttachmentNum
            };
            var fileName = $("#txtFileName").textbox("getValue");
            DesignTableData.done(function (data) {
                if (data.isSuccess) {
                    submitDesignTableValue(data.rows, list);
                    if (data.rows[0]['类型'] == -1) {
                        if (checkValIsUndefinedOrNull(fileName)) {
                            myMessage("附件不能为空！");
                            return;
                        };
                    };
                } else {
                    list["neirong"] = replaceUnequa($("#neirong2").textbox("getText"));
                    if ($.trim(list["neirong"]) == "") {
                        myMessage("文献综述内容不能为空！");
                        return;
                    };
                };

                if (checkValIsUndefinedOrNull(fileName)) { //无附件
                    list["action"] = "AddStuLiterature";
                    $.ajax({
                        url: "../Handler/Literature.ashx",
                        data: list,
                        dataType: "json",
                        type: "POST",
                        success: function (data) {
                            if (data.isSuccess) {
                                myMessage(data.message, function () {
                                    if (role == 2) {
                                        Refresh();
                                    } else {
                                        window.location.reload(true);
                                    };
                                });
                            } else {
                                myMessage(data.message);
                            }
                        },
                        complete: function () {
                            close_loading();
                        }
                    });
                } else {//有附件
                    list["action"] = "AddStuLiteratureAttachment";
                    list["ASPSESSID"] = getid();
                    list["fileCount"] = 1;
                    $.extend(webUploader.options.formData, list);
                    var fileId = $("#txtFileName").attr("fileId");
                    webUploader.upload(fileId);
                };
            });
        });


        // 取消
        $("#cancel").on("click", function () {
            location.reload(false);
        });

        function Refresh() {
            refreshTab("首页");
            window.location.reload(true);
        };

        // 附件(提交时 )
        function getAccessory(ktbh, sid, opeType) {
            $.ajax({
                url: "../Handler/OpenReport.ashx?",
                dataType: "json",
                type: "POST",
                data: {
                    action: 'GetAttachent',
                    projectId: ktbh,
                    sid: sid,
                    opeType: opeType
                },
                success: function (data) {
                    //myMessage(data.isSuccess);
                    if (data.isSuccess == true) {
                        if (data.rows.length > 0) {
                            if (data.rows[0]["文件名"] !== "" && data.rows[0]["附件"] !== "") {
                                $("#scfj").html("已有文献综述的附件，<span style='color:#ff6632;'>" + data.rows[0]["文件名"] + "<a href='javascript:AttachmentClick( \"" + data.rows[0]["文件名"] + "\" );' class='listA margl'>删除 </a> </span>  支持附件格式为doc，docx，pdf，wps，rar，zip");
                                refreshTab("首页");
                            };
                        };
                    }
                },
                error: function (err) {
                    console.log(err);
                }
            });
        };

        //删除附件
        function AttachmentClick(data) {
            $('#delmessagebox').text("你确定要删除附件（ " + data + " ）吗？");
            $('#delmessagebox').dialog({
                title: '删除附件',
                buttons: [{ text: '确定', handler: function () { AttachmentNum = 1; $("#scfj").html("上传文献综述有关附件，支持附件格式为doc，docx，pdf，wps，rar，zip"); $("#delmessagebox").dialog("close"); } },
                { text: '取消', handler: function () { AttachmentNum = 0; $("#delmessagebox").dialog("close"); } }]
            });
            $("#delmessagebox").dialog("open");
            $('#delmessagebox').window('center');
        };
        // 删除附件结束
    </script>



<div class="panel window panel-htop" style="display: none; width: 400px; left: 443px; top: 193px;"><div class="panel-header panel-header-noborder window-header" style="width: 392px;"><div class="panel-title">New Dialog</div><div class="panel-tool"><a href="javascript:;" class="panel-tool-close"></a></div></div><div id="delmessagebox" class="easyui-dialog panel-body panel-body-noborder window-body" style="text-align: center; padding: 10px; overflow-wrap: break-word; width: 378px; height: 143px;" data-options="closed:true" title=""></div></div><div class="window-shadow" style="display: none; left: 443px; top: 193px; width: 400px; height: 200px;"></div><div class="panel window panel-htop" style="display: none; width: 400px; left: 443px; top: 193px; z-index: 9005;"><div class="panel-header panel-header-noborder window-header" style="width: 392px;"><div class="panel-title">提示</div><div class="panel-tool"></div></div></div><div class="window-shadow" style="display: none; left: 443px; top: 193px; width: 400px; height: 200px; z-index: 9004;"></div><div class="window-mask" style="display: none; z-index: 9003; position: fixed;"></div><div class="panel window panel-htop" style="display: none; width: 400px; left: 443px; top: 193px; z-index: 9008;"><div class="panel-header panel-header-noborder window-header" style="width: 392px;"><div class="panel-title">提示</div><div class="panel-tool"></div></div></div><div class="window-shadow" style="display: none; left: 443px; top: 193px; width: 400px; height: 200px; z-index: 9007;"></div><div class="window-mask" style="display: none; z-index: 9006; position: fixed;"></div><div class="panel window panel-htop" style="display: none; width: 400px; left: 443px; top: 193px; z-index: 9011;"><div class="panel-header panel-header-noborder window-header" style="width: 392px;"><div class="panel-title">提示</div><div class="panel-tool"></div></div></div><div class="window-shadow" style="display: none; left: 443px; top: 193px; width: 400px; height: 200px; z-index: 9010;"></div><div class="window-mask" style="display: none; z-index: 9009; position: fixed;"></div><div class="panel window panel-htop" style="display: none; width: 400px; left: 435px; top: 193px; z-index: 9026;"><div class="panel-header panel-header-noborder window-header" style="width: 392px;"><div class="panel-title">提示</div><div class="panel-tool"></div></div></div><div class="window-shadow" style="display: none; left: 435px; top: 193px; width: 400px; height: 200px; z-index: 9025;"></div><div class="window-mask" style="display: none; z-index: 9024; position: fixed;"></div><div style="width:0; height:0; overflow:hidden; "><div id="gxf_rangy_maxredBox" class="easyui-dialog" data-options="closed:true,modal:true,closable: false" style=" width:800px; height:470px; text-align:left; padding:5px 20px;"><div><input type="hidden" id="hdArticleRemarkId" value=""><input type="hidden" id="hdSelectedText" value=""><input type="hidden" id="hdSerializedSelection" value=""><p style="line-height: 30px;"><span>批注人：</span><span id="lblCreatorName">---</span><span class="margl">批注时间：</span><span id="lblDatetime"></span></p><p style="word-break: break-word;"><input id="txtRemark" type="text" class="easyui-textbox" data-options="multiline:true,height:160,width:760"></p><h3 style="margin: 10px 0;">选中批注的内容：</h3><p id="postilDetailContent"></p></div></div></div><div style="width:0; height:0; overflow:hidden; "><div id="gxf_rangy_delModelBox" class="easyui-dialog" data-options="closed:true,modal:true" style=" width:400px; height: 200px; text-align:center; padding:30px"></div></div></body></html>